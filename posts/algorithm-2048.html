<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>时隔五年重写 2048 核心算法 | 梦飞翔的小站</title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/assets/style.93999ffb.css">
    <link rel="modulepreload" href="/assets/app.bbd7b455.js">
    <link rel="modulepreload" href="/assets/posts_algorithm-2048.md.871fc03c.lean.js">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/regular.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+SC">
  <script src="https://cdn.jsdelivr.net/npm/@waline/client@1.5.4/dist/Waline.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><!--[--><header><span class="brand"></span><span class="container"><span class="menu"><ul><!--[--><li><a href="/"><span><i class="fa fa-home"></i> 首页</span></a></li><li><a href="/tags/"><span><i class="fa fa-tag"></i> 标签</span></a></li><li><a href="/readme.html"><span><i class="fa fa-leaf"></i> 关于</span></a></li><!--]--></ul></span></span><span class="other"><a class="search"><i class="fa fa-search"></i></a></span></header><aside></aside><main><a href="#" class="totop" style="top:-900px;" aria-label="to-top"></a><!--[--><div class="abanner" style="background-image: url(https://tva4.sinaimg.cn/large/0060lm7Tly1ftg6omnqa4j31hc0u010z.jpg)"><div class="titlebox"><h1 class="title">时隔五年重写 2048 核心算法</h1><div class="info">flaribbit · 更新于 2022-07-10 · 0 次阅读</div></div></div><div class="article"><div style="position:relative;" class="content"><div><p>《2048》是一款单人在线和移动端游戏，由19岁的意大利人Gabriele Cirulli于2014年3月开发。游戏任务是在一个网格上滑动小方块来进行组合，直到形成一个带有有数字2048的方块。</p><hr><h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-hidden="true">#</a></h2><p>在公交车上看到有人玩 2048，突然想起自己在多年前在计算器上写过。</p><p>当时的算法是某次月考中，写完理综后在选择题旁边推出来的，利用自习课时间在计算器上实现，后来又移植到 C 语言，编写了一个 addin。</p><p>当年搞出的算法是这样的：</p><div class="language-c line-numbers-mode"><button class="copy"></button><span class="lang">c</span><pre><code><span class="line"><span style="color:#6E7781;">// ...</span></span>
<span class="line"><span style="color:#24292F;">		</span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(key</span><span style="color:#CF222E;">==</span><span style="color:#24292F;">KEY_CTRL_LEFT){</span></span>
<span class="line"><span style="color:#24292F;">			</span><span style="color:#CF222E;">for</span><span style="color:#24292F;">(i</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">&lt;</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">++</span><span style="color:#24292F;">){</span></span>
<span class="line"><span style="color:#24292F;">				</span><span style="color:#8250DF;">Move</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i][</span><span style="color:#0550AE;">3</span><span style="color:#24292F;">],</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i][</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">],</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i][</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">],</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i][</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">],</span><span style="color:#CF222E;">&amp;</span><span style="color:#24292F;">score,</span><span style="color:#CF222E;">&amp;</span><span style="color:#24292F;">new);</span></span>
<span class="line"><span style="color:#24292F;">			}</span></span>
<span class="line"><span style="color:#24292F;">		}</span></span>
<span class="line"><span style="color:#24292F;">		</span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(key</span><span style="color:#CF222E;">==</span><span style="color:#24292F;">KEY_CTRL_RIGHT){</span></span>
<span class="line"><span style="color:#24292F;">			</span><span style="color:#CF222E;">for</span><span style="color:#24292F;">(i</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">&lt;</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">++</span><span style="color:#24292F;">){</span></span>
<span class="line"><span style="color:#24292F;">				</span><span style="color:#8250DF;">Move</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i][</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">],</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i][</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">],</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i][</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">],</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i][</span><span style="color:#0550AE;">3</span><span style="color:#24292F;">],</span><span style="color:#CF222E;">&amp;</span><span style="color:#24292F;">score,</span><span style="color:#CF222E;">&amp;</span><span style="color:#24292F;">new);</span></span>
<span class="line"><span style="color:#24292F;">			}</span></span>
<span class="line"><span style="color:#24292F;">		}</span></span>
<span class="line"><span style="color:#24292F;">		</span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(key</span><span style="color:#CF222E;">==</span><span style="color:#24292F;">KEY_CTRL_UP){</span></span>
<span class="line"><span style="color:#24292F;">			</span><span style="color:#CF222E;">for</span><span style="color:#24292F;">(i</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">&lt;</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">++</span><span style="color:#24292F;">){</span></span>
<span class="line"><span style="color:#24292F;">				</span><span style="color:#8250DF;">Move</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">3</span><span style="color:#24292F;">][i],</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">][i],</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">][i],</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">][i],</span><span style="color:#CF222E;">&amp;</span><span style="color:#24292F;">score,</span><span style="color:#CF222E;">&amp;</span><span style="color:#24292F;">new);</span></span>
<span class="line"><span style="color:#24292F;">			}</span></span>
<span class="line"><span style="color:#24292F;">		}</span></span>
<span class="line"><span style="color:#24292F;">		</span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(key</span><span style="color:#CF222E;">==</span><span style="color:#24292F;">KEY_CTRL_DOWN){</span></span>
<span class="line"><span style="color:#24292F;">			</span><span style="color:#CF222E;">for</span><span style="color:#24292F;">(i</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">&lt;</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">++</span><span style="color:#24292F;">){</span></span>
<span class="line"><span style="color:#24292F;">				</span><span style="color:#8250DF;">Move</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">][i],</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">][i],</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">][i],</span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">3</span><span style="color:#24292F;">][i],</span><span style="color:#CF222E;">&amp;</span><span style="color:#24292F;">score,</span><span style="color:#CF222E;">&amp;</span><span style="color:#24292F;">new);</span></span>
<span class="line"><span style="color:#24292F;">			}</span></span>
<span class="line"><span style="color:#24292F;">		}</span></span>
<span class="line"><span style="color:#6E7781;">// ...</span></span>
<span class="line"><span style="color:#CF222E;">void</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">Move</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">int</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">*</span><span style="color:#953800;">a</span><span style="color:#24292F;">,</span><span style="color:#CF222E;">int</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">*</span><span style="color:#953800;">b</span><span style="color:#24292F;">,</span><span style="color:#CF222E;">int</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">*</span><span style="color:#953800;">c</span><span style="color:#24292F;">,</span><span style="color:#CF222E;">int</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">*</span><span style="color:#953800;">d</span><span style="color:#24292F;">,</span><span style="color:#CF222E;">unsigned</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">long</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">int</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">*</span><span style="color:#953800;">score</span><span style="color:#24292F;">,</span><span style="color:#CF222E;">int</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">*</span><span style="color:#953800;">new</span><span style="color:#24292F;">){</span></span>
<span class="line"><span style="color:#24292F;">	</span><span style="color:#CF222E;">int</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">],i,j;</span></span>
<span class="line"><span style="color:#24292F;">	</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">]</span><span style="color:#CF222E;">=</span><span style="color:#24292F;">a;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">]</span><span style="color:#CF222E;">=</span><span style="color:#24292F;">b;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">]</span><span style="color:#CF222E;">=</span><span style="color:#24292F;">c;</span><span style="color:#953800;">t</span><span style="color:#24292F;">[</span><span style="color:#0550AE;">3</span><span style="color:#24292F;">]</span><span style="color:#CF222E;">=</span><span style="color:#24292F;">d;</span></span>
<span class="line"><span style="color:#24292F;">	</span><span style="color:#CF222E;">for</span><span style="color:#24292F;">(j</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">3</span><span style="color:#24292F;">;j</span><span style="color:#CF222E;">&gt;</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;j</span><span style="color:#CF222E;">--</span><span style="color:#24292F;">){</span></span>
<span class="line"><span style="color:#24292F;">		</span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[j]) </span><span style="color:#CF222E;">continue</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">		</span><span style="color:#CF222E;">for</span><span style="color:#24292F;">(i</span><span style="color:#CF222E;">=</span><span style="color:#24292F;">j</span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">&gt;=</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">--</span><span style="color:#24292F;">){</span></span>
<span class="line"><span style="color:#24292F;">			</span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i]){</span></span>
<span class="line"><span style="color:#24292F;">				</span><span style="color:#CF222E;">*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[j]</span><span style="color:#CF222E;">=*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i];</span></span>
<span class="line"><span style="color:#24292F;">				</span><span style="color:#CF222E;">*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i]</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">				</span><span style="color:#CF222E;">*</span><span style="color:#24292F;">new</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">				</span><span style="color:#CF222E;">break</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">			}</span></span>
<span class="line"><span style="color:#24292F;">		}</span></span>
<span class="line"><span style="color:#24292F;">	}</span></span>
<span class="line"><span style="color:#24292F;">	</span><span style="color:#CF222E;">for</span><span style="color:#24292F;">(i</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">3</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">&gt;</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">--</span><span style="color:#24292F;">){</span></span>
<span class="line"><span style="color:#24292F;">		</span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i</span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">]</span><span style="color:#CF222E;">==*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i]</span><span style="color:#CF222E;">&amp;&amp;*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i]</span><span style="color:#CF222E;">!=</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">){</span><span style="color:#CF222E;">*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i]</span><span style="color:#CF222E;">*=</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">;</span><span style="color:#CF222E;">*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i</span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">]</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;</span><span style="color:#CF222E;">*</span><span style="color:#24292F;">score</span><span style="color:#CF222E;">+=*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i];</span><span style="color:#CF222E;">*</span><span style="color:#24292F;">new</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">;}</span></span>
<span class="line"><span style="color:#24292F;">	}</span></span>
<span class="line"><span style="color:#24292F;">	</span><span style="color:#CF222E;">for</span><span style="color:#24292F;">(j</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">3</span><span style="color:#24292F;">;j</span><span style="color:#CF222E;">&gt;</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;j</span><span style="color:#CF222E;">--</span><span style="color:#24292F;">){</span></span>
<span class="line"><span style="color:#24292F;">		</span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[j]) </span><span style="color:#CF222E;">continue</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">		</span><span style="color:#CF222E;">for</span><span style="color:#24292F;">(i</span><span style="color:#CF222E;">=</span><span style="color:#24292F;">j</span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">&gt;=</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;i</span><span style="color:#CF222E;">--</span><span style="color:#24292F;">){</span></span>
<span class="line"><span style="color:#24292F;">			</span><span style="color:#CF222E;">if</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i]){</span></span>
<span class="line"><span style="color:#24292F;">				</span><span style="color:#CF222E;">*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[j]</span><span style="color:#CF222E;">=*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i];</span></span>
<span class="line"><span style="color:#24292F;">				</span><span style="color:#CF222E;">*</span><span style="color:#953800;">t</span><span style="color:#24292F;">[i]</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">				</span><span style="color:#CF222E;">*</span><span style="color:#24292F;">new</span><span style="color:#CF222E;">=</span><span style="color:#0550AE;">1</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">				</span><span style="color:#CF222E;">break</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">			}</span></span>
<span class="line"><span style="color:#24292F;">		}</span></span>
<span class="line"><span style="color:#24292F;">	}</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#6E7781;">// ...</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p>看不懂是吧，哈哈我也看不懂，而且这个神必算法只适用于 4x4 的场景。</p><p>可惜最初的 basic 版本已经丢了，一同丢的还有 400 字节的贪吃蛇和高考前没完成的植物大战僵尸。</p><h2 id="思路分析" tabindex="-1">思路分析 <a class="header-anchor" href="#思路分析" aria-hidden="true">#</a></h2><p>跑题了，继续说正事。</p><p>2048 的核心算法是如果两个带有相同数字的方块在移动中碰撞，则它们会合并为一个方块，且所带数字变为两者之和。</p><p>比如 <code>[2 _ 2 2]</code> 向左移动就会变成 <code>[4 2 _ _ ]</code>。</p><p>稍加思索，四个方向移动的核心算法其实是一样的，使用一维数组存储场地，四个方向的区别只是取子数组的步长不一样，右 1 左 -1 下 n 上 -n。</p><p>因此我们只需实现一个移动并合并相同数字的算法，典型的双指针。</p><ul><li>如果快指针没有数字，自增；</li><li>如果慢指针没有数字，快指针有，移动；</li><li>如果两者数字相同，合并；</li></ul><h2 id="带测试的核心算法" tabindex="-1">带测试的核心算法 <a class="header-anchor" href="#带测试的核心算法" aria-hidden="true">#</a></h2><div class="language-cpp line-numbers-mode"><button class="copy"></button><span class="lang">cpp</span><pre><code><span class="line"><span style="color:#CF222E;">#include</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&lt;iostream&gt;</span></span>
<span class="line"><span style="color:#CF222E;">#include</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&lt;string&gt;</span></span>
<span class="line"><span style="color:#CF222E;">#include</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&lt;array&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E7781;">// 核心算法</span></span>
<span class="line"><span style="color:#CF222E;">void</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">move</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">int</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">*</span><span style="color:#953800;">arr</span><span style="color:#24292F;">, </span><span style="color:#CF222E;">int</span><span style="color:#24292F;"> </span><span style="color:#953800;">n</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">int</span><span style="color:#24292F;"> i </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">1</span><span style="color:#24292F;">, j </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">while</span><span style="color:#24292F;"> (i </span><span style="color:#CF222E;">&lt;</span><span style="color:#24292F;"> n) {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (arr[i] </span><span style="color:#CF222E;">==</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">0</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">||</span><span style="color:#24292F;"> i </span><span style="color:#CF222E;">==</span><span style="color:#24292F;"> j) {</span></span>
<span class="line"><span style="color:#24292F;">            i</span><span style="color:#CF222E;">++</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">        } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (arr[i] </span><span style="color:#CF222E;">==</span><span style="color:#24292F;"> arr[j]) {</span></span>
<span class="line"><span style="color:#24292F;">            arr[j] </span><span style="color:#CF222E;">+=</span><span style="color:#24292F;"> arr[i];</span></span>
<span class="line"><span style="color:#24292F;">            arr[i] </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">            i</span><span style="color:#CF222E;">++</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">            j</span><span style="color:#CF222E;">++</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">        } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (arr[j] </span><span style="color:#CF222E;">==</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">            arr[j] </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> arr[i];</span></span>
<span class="line"><span style="color:#24292F;">            arr[i] </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">            i</span><span style="color:#CF222E;">++</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">        } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">            j</span><span style="color:#CF222E;">++</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">        }</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">template</span><span style="color:#24292F;"> &lt;</span><span style="color:#CF222E;">typename</span><span style="color:#24292F;"> </span><span style="color:#953800;">T</span><span style="color:#24292F;">, </span><span style="color:#CF222E;">size_t</span><span style="color:#24292F;"> </span><span style="color:#953800;">N</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#953800;">std</span><span style="color:#24292F;">::</span><span style="color:#953800;">string</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">to_string</span><span style="color:#24292F;">(</span><span style="color:#953800;">std</span><span style="color:#24292F;">::</span><span style="color:#953800;">array</span><span style="color:#24292F;">&lt;</span><span style="color:#953800;">T</span><span style="color:#24292F;">, </span><span style="color:#953800;">N</span><span style="color:#24292F;">&gt; </span><span style="color:#CF222E;">&amp;</span><span style="color:#953800;">arr</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#953800;">std</span><span style="color:#24292F;">::string s </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;[&quot;</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">bool</span><span style="color:#24292F;"> first </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">for</span><span style="color:#24292F;"> (</span><span style="color:#CF222E;">auto</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">&amp;</span><span style="color:#24292F;">i : arr) {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (</span><span style="color:#CF222E;">!</span><span style="color:#24292F;">first) s </span><span style="color:#CF222E;">+=</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;, &quot;</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">        s </span><span style="color:#CF222E;">+=</span><span style="color:#24292F;"> </span><span style="color:#953800;">std</span><span style="color:#24292F;">::</span><span style="color:#8250DF;">to_string</span><span style="color:#24292F;">(i);</span></span>
<span class="line"><span style="color:#24292F;">        first </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">false</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">    s </span><span style="color:#CF222E;">+=</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;]&quot;</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> s;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">template</span><span style="color:#24292F;"> &lt;</span><span style="color:#CF222E;">size_t</span><span style="color:#24292F;"> </span><span style="color:#953800;">N</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#CF222E;">bool</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">(</span><span style="color:#953800;">std</span><span style="color:#24292F;">::</span><span style="color:#953800;">array</span><span style="color:#24292F;">&lt;</span><span style="color:#CF222E;">int</span><span style="color:#24292F;">, </span><span style="color:#953800;">N</span><span style="color:#24292F;">&gt; </span><span style="color:#953800;">from</span><span style="color:#24292F;">, </span><span style="color:#953800;">std</span><span style="color:#24292F;">::</span><span style="color:#953800;">array</span><span style="color:#24292F;">&lt;</span><span style="color:#CF222E;">int</span><span style="color:#24292F;">, </span><span style="color:#953800;">N</span><span style="color:#24292F;">&gt; </span><span style="color:#953800;">to</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">auto</span><span style="color:#24292F;"> arr </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> from;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">move</span><span style="color:#24292F;">(arr.</span><span style="color:#8250DF;">data</span><span style="color:#24292F;">(), N);</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">for</span><span style="color:#24292F;"> (</span><span style="color:#CF222E;">size_t</span><span style="color:#24292F;"> i </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">; i </span><span style="color:#CF222E;">&lt;</span><span style="color:#24292F;"> N; i</span><span style="color:#CF222E;">++</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (arr[i] </span><span style="color:#CF222E;">!=</span><span style="color:#24292F;"> to[i]) {</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#953800;">std</span><span style="color:#24292F;">::cout </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;FAIL: &quot;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">to_string</span><span style="color:#24292F;">(from) </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot; -&gt; &quot;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">to_string</span><span style="color:#24292F;">(arr) </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;, expected: &quot;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">to_string</span><span style="color:#24292F;">(to) </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#953800;">std</span><span style="color:#24292F;">::endl;</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">false</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">        }</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#953800;">std</span><span style="color:#24292F;">::cout </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;PASS: &quot;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">to_string</span><span style="color:#24292F;">(from) </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot; -&gt; &quot;</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">to_string</span><span style="color:#24292F;">(to) </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#953800;">std</span><span style="color:#24292F;">::endl;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">int</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">main</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">int</span><span style="color:#24292F;"> </span><span style="color:#953800;">argc</span><span style="color:#24292F;">, </span><span style="color:#CF222E;">char</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">*</span><span style="color:#953800;">argv</span><span style="color:#24292F;">[]) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">using</span><span style="color:#24292F;"> </span><span style="color:#953800;">std</span><span style="color:#24292F;">::array;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">(array{</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">});</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">(array{</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">});</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">(array{</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">});</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">(array{</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">});</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">(array{</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">});</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">(array{</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">});</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">(array{</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">});</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">(array{</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">});</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">(array{</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">});</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">(array{</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">});</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">(array{</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">8</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">});</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h2 id="其他" tabindex="-1">其他 <a class="header-anchor" href="#其他" aria-hidden="true">#</a></h2><p>写测试的时候遇到了一点小插曲</p><div class="language-cpp line-numbers-mode"><button class="copy"></button><span class="lang">cpp</span><pre><code><span class="line"><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">({</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">});</span><span style="color:#6E7781;"> // 报错</span></span>
<span class="line"><span style="color:#8250DF;">test_case</span><span style="color:#24292F;">&lt;</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">&gt;({</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">}, {</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">});</span><span style="color:#6E7781;"> // 可以</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>我还以为是编译器不能推导长度，结果是不能推导参数类型，至少指定一个就可以了，另一个可以自动隐式转换。</p></div></div><div class="content nav"><span><a href="/posts/new-to-arch.html"><i class="fa fa-angle-left"></i> archlinux 入坑和踩坑记录</a></span><span><a href="/posts/cpp-promise.html">c++ promise future 初体验 <i class="fa fa-angle-right"></i></a></span></div><div id="waline"></div><div class="toc"><ol><!--[--><li class="h2 active"><a href="#前言">前言</a></li><li class="h2"><a href="#思路分析">思路分析</a></li><li class="h2"><a href="#带测试的核心算法">带测试的核心算法</a></li><li class="h2"><a href="#其他">其他</a></li><!--]--></ol></div></div><!--]--></main><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"ca20a287\",\"posts_algorithm-2048.md\":\"871fc03c\",\"posts_algorithm-template.md\":\"83094412\",\"posts_ascii-art.md\":\"1f6b3f09\",\"posts_calc-demo.md\":\"5caa89f3\",\"posts_call-cpp-from-python.md\":\"2dfcbece\",\"posts_cpp-promise.md\":\"a8ebd35a\",\"posts_d3-note.md\":\"e50d8e89\",\"posts_dev-on-windows.md\":\"d35cdf68\",\"posts_fix-matplotlib-chinese.md\":\"2f162d31\",\"posts_fn_in_rust.md\":\"ce429cdd\",\"posts_indexeddb.md\":\"d522a9de\",\"posts_love2d-require-c-library.md\":\"743db960\",\"posts_new-to-arch.md\":\"9bcf3ec1\",\"posts_pattern-recognition-note.md\":\"f4522a16\",\"posts_pyside2-quick-start.md\":\"8a23d477\",\"posts_python-opencv.md\":\"196fb4a0\",\"posts_ripple-animation.md\":\"5b5ac841\",\"posts_rust-list-slice.md\":\"be7eba78\",\"posts_tensorflow-note.md\":\"98ed70db\",\"posts_tetris-field-compress.md\":\"ec4d4c73\",\"posts_write-code-from-answer.md\":\"5a76b111\",\"posts_xjb-utils.md\":\"e978be08\",\"readme.md\":\"cf00f724\",\"tags_index.md\":\"0abfc588\"}")</script>
    <script type="module" async src="/assets/app.bbd7b455.js"></script>
    
  </body>
</html>