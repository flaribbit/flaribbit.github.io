import{_ as s,o as n,c as a,a as l}from"./app.7b170300.js";const d=JSON.parse('{"title":"\u4FC4\u7F57\u65AF\u65B9\u5757\u573A\u5730\u538B\u7F29","description":"","frontmatter":{"title":"\u4FC4\u7F57\u65AF\u65B9\u5757\u573A\u5730\u538B\u7F29","date":"2022-05-27T15:30:00.000Z","tags":["rust","\u7B14\u8BB0"]},"headers":[{"level":2,"title":"\u4EE3\u7801","slug":"\u4EE3\u7801","link":"#\u4EE3\u7801","children":[]},{"level":2,"title":"python \u7684 raw inflate/deflate","slug":"python-\u7684-raw-inflate-deflate","link":"#python-\u7684-raw-inflate-deflate","children":[]}],"relativePath":"posts/tetris-field-compress.md"}'),p={name:"posts/tetris-field-compress.md"},e=l(`<hr><h2 id="\u4EE3\u7801" tabindex="-1">\u4EE3\u7801 <a class="header-anchor" href="#\u4EE3\u7801" aria-hidden="true">#</a></h2><div class="language-py line-numbers-mode"><button class="copy"></button><span class="lang">py</span><pre><code><span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> zlib</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> base64</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">field_str </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#0A3069;">IJJJLOO___</span></span>
<span class="line"><span style="color:#0A3069;">IJZZLOO___</span></span>
<span class="line"><span style="color:#0A3069;">IZZLLS____</span></span>
<span class="line"><span style="color:#0A3069;">ITJJSS____</span></span>
<span class="line"><span style="color:#0A3069;">ITTJS_____</span></span>
<span class="line"><span style="color:#0A3069;">ITLLL_____</span></span>
<span class="line"><span style="color:#0A3069;">IJJJ______</span></span>
<span class="line"><span style="color:#0A3069;">IJ________</span></span>
<span class="line"><span style="color:#0A3069;">&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">blockid </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0A3069;">&#39;_&#39;</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0A3069;">&#39;I&#39;</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">1</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0A3069;">&#39;L&#39;</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0A3069;">&#39;O&#39;</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">3</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0A3069;">&#39;Z&#39;</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">4</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0A3069;">&#39;T&#39;</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">5</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0A3069;">&#39;J&#39;</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">6</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0A3069;">&#39;S&#39;</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">7</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0A3069;">&#39;X&#39;</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">8</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0A3069;">&#39;=&#39;</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">9</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">def</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">field_from_str</span><span style="color:#24292F;">(field: </span><span style="color:#0550AE;">str</span><span style="color:#24292F;">):</span></span>
<span class="line"><span style="color:#24292F;">    res </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> []</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">for</span><span style="color:#24292F;"> line </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> field.split(</span><span style="color:#0A3069;">&#39;</span><span style="color:#0550AE;">\\n</span><span style="color:#0A3069;">&#39;</span><span style="color:#24292F;">):</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">len</span><span style="color:#24292F;">(line) </span><span style="color:#CF222E;">!=</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">10</span><span style="color:#24292F;">:</span></span>
<span class="line"><span style="color:#24292F;">            </span><span style="color:#CF222E;">continue</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">for</span><span style="color:#24292F;"> i </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">range</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">len</span><span style="color:#24292F;">(line), </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">):</span></span>
<span class="line"><span style="color:#24292F;">            a, b </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> blockid[line[i]], blockid[line[i </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">1</span><span style="color:#24292F;">]]</span></span>
<span class="line"><span style="color:#24292F;">            res.append(a </span><span style="color:#CF222E;">&lt;&lt;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">4</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">|</span><span style="color:#24292F;"> b)</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">bytes</span><span style="color:#24292F;">(res)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E;">def</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">field_to_base64</span><span style="color:#24292F;">(field: </span><span style="color:#0550AE;">str</span><span style="color:#24292F;">):</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> base64.b64encode(zlib.compress(field_from_str(field))[</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">:</span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">]).decode()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">res </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> field_to_base64(field_str)</span></span>
<span class="line"><span style="color:#0550AE;">print</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">len</span><span style="color:#24292F;">(res))</span></span>
<span class="line"><span style="color:#0550AE;">print</span><span style="color:#24292F;">(res)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#0550AE;">print</span><span style="color:#24292F;">(zlib.decompress(zlib.compress(field_from_str(field_str))[</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">:</span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">], </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">15</span><span style="color:#24292F;">))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h2 id="python-\u7684-raw-inflate-deflate" tabindex="-1">python \u7684 raw inflate/deflate <a class="header-anchor" href="#python-\u7684-raw-inflate-deflate" aria-hidden="true">#</a></h2><p>raw inflate \u5176\u5B9E\u5C31\u662F\u6CA1\u6709\u5934\u90E8\u548C\u5C3E\u90E8\u7684 inflate\uFF0C\u6709\u4E2A\u5F88\u66B4\u529B\u7684\u5B9E\u73B0\u65B9\u5F0F\u5C31\u662F\u76F4\u63A5\u622A\u6389\u3002</p><div class="language-py line-numbers-mode"><button class="copy"></button><span class="lang">py</span><pre><code><span class="line"><span style="color:#24292F;">zlib.compress(data)[</span><span style="color:#0550AE;">2</span><span style="color:#24292F;">:</span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">4</span><span style="color:#24292F;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u89E3\u538B\u7684\u65F6\u5019\u9700\u8981\u52A0\u4E2A\u6807\u5FD7\u8BA9 python \u4E0D\u62A5\u9519</p><div class="language-py line-numbers-mode"><button class="copy"></button><span class="lang">py</span><pre><code><span class="line"><span style="color:#24292F;">zlib.decompress(data, </span><span style="color:#CF222E;">-</span><span style="color:#0550AE;">15</span><span style="color:#24292F;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div>`,8),o=[e];function r(c,t,i,y,b,F){return n(),a("div",null,o)}const m=s(p,[["render",r]]);export{d as __pageData,m as default};
